<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ - çº¯è‰²èƒŒæ™¯ç‰ˆ</title>
  <!-- å†…è”CSSæ ·å¼ -->
  <style>
    /* å¯¼å…¥Googleå­—ä½“ */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    /* CSSå˜é‡ */
    :root {
      --primary-color: #4f46e5;
      --primary-hover: #4338ca;
      --secondary-color: #06b6d4;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --dark-color: #1f2937;
      --light-color: #f9fafb;
      --border-color: #e5e7eb;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* åŸºç¡€æ ·å¼ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: var(--dark-color);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      /* ä½¿ç”¨çº¯è‰²èƒŒæ™¯ */
      background-color: #1a365d;
    }
    
    /* èƒŒæ™¯åˆ‡æ¢æŒ‰é’® */
    .bg-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .bg-option {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 3px solid white;
      cursor: pointer;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      position: relative;
    }
    
    .bg-option:hover {
      transform: scale(1.1);
    }
    
    .bg-option.active {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3);
    }
    
    .bg-option.gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .bg-option.solid {
      background: #1a365d;
    }
    
    .bg-option.image {
      background: url('https://picsum.photos/seed/taskmanager/100/100.jpg') no-repeat center center;
      background-size: cover;
    }
    
    .bg-option.pattern {
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23333"/><circle cx="50" cy="50" r="40" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><circle cx="50" cy="50" r="30" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><circle cx="50" cy="50" r="20" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></svg>');
      background-size: 100px 100px;
    }
    
    /* å®¹å™¨ */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    
    /* å¤´éƒ¨ */
    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-md);
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid var(--border-color);
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
      box-shadow: var(--shadow-md);
    }
    
    .logo h1 {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* å¯¼èˆª */
    nav {
      display: none;
    }
    
    @media (min-width: 768px) {
      nav {
        display: flex;
        gap: 0.5rem;
        background: rgba(255, 255, 255, 0.5);
        padding: 0.25rem;
        border-radius: 12px;
        backdrop-filter: blur(5px);
      }
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      text-decoration: none;
      color: var(--dark-color);
      font-weight: 500;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }
    
    .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      opacity: 0;
      transition: var(--transition);
      z-index: -1;
    }
    
    .nav-link:hover {
      transform: translateY(-2px);
      color: var(--primary-color);
    }
    
    .nav-link.active {
      color: white;
      box-shadow: var(--shadow-md);
    }
    
    .nav-link.active::before {
      opacity: 1;
    }
    
    .nav-link i {
      margin-right: 0.5rem;
    }
    
    /* ç§»åŠ¨ç«¯èœå• */
    .mobile-menu-btn {
      display: block;
      background: rgba(255, 255, 255, 0.8);
      border: none;
      color: var(--dark-color);
      font-size: 1.25rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }
    
    .mobile-menu-btn:hover {
      background: white;
      transform: translateY(-2px);
    }
    
    @media (min-width: 768px) {
      .mobile-menu-btn {
        display: none;
      }
    }
    
    .mobile-menu {
      display: none;
      margin-top: 1rem;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      padding: 0.75rem;
      border-radius: 12px;
      box-shadow: var(--shadow-lg);
    }
    
    .mobile-menu.show {
      display: block;
    }
    
    .mobile-menu .nav-link {
      display: block;
      padding: 0.75rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }
    
    /* ä¸»è¦å†…å®¹ */
    main {
      flex: 1;
      padding: 2rem 0;
    }
    
    .view {
      display: block;
    }
    
    .view.hidden {
      display: none;
    }
    
    /* é¡µé¢æ ‡é¢˜ */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    
    .page-title {
      font-size: 2rem;
      font-weight: 700;
      color: white;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* å¡ç‰‡ */
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: var(--shadow-lg);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      opacity: 0;
      transition: var(--transition);
    }
    
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
    }
    
    .card:hover::before {
      opacity: 1;
    }
    
    /* æŒ‰é’® */
    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      text-align: center;
      cursor: pointer;
      border: none;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: var(--transition);
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
      color: white;
      box-shadow: var(--shadow-md);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    
    .btn-secondary {
      background: rgba(255, 255, 255, 0.9);
      color: var(--dark-color);
      box-shadow: var(--shadow);
    }
    
    .btn-secondary:hover {
      background: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, var(--danger-color), #dc2626);
      color: white;
      box-shadow: var(--shadow-md);
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    
    .btn-sm {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
    
    /* è¡¨å• */
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--dark-color);
    }
    
    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border-color);
      border-radius: 10px;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.9);
      transition: var(--transition);
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
      background: white;
    }
    
    /* æ¨¡æ€æ¡† */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }
    
    .modal.show {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      box-shadow: var(--shadow-xl);
      padding: 2rem;
      width: 100%;
      max-width: 32rem;
      margin: 0 1rem;
      transform: scale(0.9);
      transition: var(--transition);
    }
    
    .modal.show .modal-content {
      transform: scale(1);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .modal-close {
      background: rgba(255, 255, 255, 0.9);
      border: none;
      color: var(--dark-color);
      font-size: 1.25rem;
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .modal-close:hover {
      background: var(--light-color);
      transform: rotate(90deg);
    }
    
    .modal-footer {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    /* è¿›åº¦æ¡ */
    .progress-bar {
      width: 100%;
      height: 10px;
      background: var(--border-color);
      border-radius: 5px;
      overflow: hidden;
      margin: 0.75rem 0;
    }
    
    .progress-fill {
      height: 100%;
      border-radius: 5px;
      transition: width 0.5s ease;
    }
    
    .progress-primary {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }
    
    .progress-success {
      background: linear-gradient(90deg, var(--success-color), #059669);
    }
    
    /* ç»Ÿè®¡å¡ç‰‡ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: var(--shadow-lg);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
    }
    
    .stat-card.primary::before {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }
    
    .stat-card.success::before {
      background: linear-gradient(90deg, var(--success-color), #059669);
    }
    
    .stat-card.warning::before {
      background: linear-gradient(90deg, var(--warning-color), #d97706);
    }
    
    .stat-card.danger::before {
      background: linear-gradient(90deg, var(--danger-color), #dc2626);
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      font-size: 0.875rem;
      color: #6b7280;
      font-weight: 500;
    }
    
    /* ä»»åŠ¡å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
    .task-card {
      position: relative;
    }
    
    .task-card.completed {
      opacity: 0.7;
    }
    
    .task-card.completed .task-title {
      text-decoration: line-through;
      color: #6b7280;
    }
    
    .task-priority {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    
    .priority-high {
      background: var(--danger-color);
    }
    
    .priority-medium {
      background: var(--warning-color);
    }
    
    .priority-low {
      background: var(--success-color);
    }
    
    /* è¯¾ç¨‹å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
    .course-color-indicator {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      margin-right: 0.75rem;
    }
    
    /* é¡µè„š */
    footer {
      background: rgba(31, 41, 55, 0.9);
      backdrop-filter: blur(10px);
      color: white;
      padding: 2rem 0;
      margin-top: auto;
    }
    
    .footer-content {
      text-align: center;
    }
    
    /* å·¥å…·ç±» */
    .flex {
      display: flex;
    }
    
    .flex-col {
      flex-direction: column;
    }
    
    .justify-between {
      justify-content: space-between;
    }
    
    .items-center {
      align-items: center;
    }
    
    .space-x-2 > * + * {
      margin-left: 0.5rem;
    }
    
    .space-x-3 > * + * {
      margin-left: 0.75rem;
    }
    
    .space-y-2 > * + * {
      margin-top: 0.5rem;
    }
    
    .text-sm {
      font-size: 0.875rem;
    }
    
    .text-lg {
      font-size: 1.125rem;
    }
    
    .text-xl {
      font-size: 1.25rem;
    }
    
    .text-2xl {
      font-size: 1.5rem;
    }
    
    .font-bold {
      font-weight: 700;
    }
    
    .font-semibold {
      font-weight: 600;
    }
    
    .text-gray-500 {
      color: #6b7280;
    }
    
    .text-gray-600 {
      color: #4b5563;
    }
    
    .text-white {
      color: white;
    }
    
    .mb-1 {
      margin-bottom: 0.25rem;
    }
    
    .mb-3 {
      margin-bottom: 0.75rem;
    }
    
    .mb-4 {
      margin-bottom: 1rem;
    }
    
    .mb-6 {
      margin-bottom: 1.5rem;
    }
    
    .mr-1 {
      margin-right: 0.25rem;
    }
    
    .mr-2 {
      margin-right: 0.5rem;
    }
    
    .mr-3 {
      margin-right: 0.75rem;
    }
    
    .w-full {
      width: 100%;
    }
    
    .w-2 {
      width: 0.5rem;
    }
    
    .w-3 {
      width: 0.75rem;
    }
    
    .h-2 {
      height: 0.5rem;
    }
    
    .h-3 {
      height: 0.75rem;
    }
    
    .h-10 {
      height: 2.5rem;
    }
    
    .rounded {
      border-radius: 0.25rem;
    }
    
    .rounded-full {
      border-radius: 9999px;
    }
    
    .opacity-70 {
      opacity: 0.7;
    }
    
    .line-through {
      text-decoration: line-through;
    }
    
    @media (min-width: 768px) {
      .md\\:flex-row {
        flex-direction: row;
      }
      
      .md\\:mb-0 {
        margin-bottom: 0;
      }
      
      .md\\:items-end {
        align-items: flex-end;
      }
    }
    
    /* åŠ¨ç”» */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    
    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 768px) {
      .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .modal-footer {
        flex-direction: column;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .bg-switcher {
        top: 10px;
        right: 10px;
      }
      
      .bg-option {
        width: 30px;
        height: 30px;
      }
    }
  </style>
</head>
<body>
  <!-- èƒŒæ™¯åˆ‡æ¢æŒ‰é’® -->
  <div class="bg-switcher">
    <div class="bg-option gradient" title="æ¸å˜èƒŒæ™¯" data-bg="gradient"></div>
    <div class="bg-option solid active" title="çº¯è‰²èƒŒæ™¯" data-bg="solid"></div>
    <div class="bg-option image" title="å›¾ç‰‡èƒŒæ™¯" data-bg="image"></div>
    <div class="bg-option pattern" title="å›¾æ¡ˆèƒŒæ™¯" data-bg="pattern"></div>
  </div>

  <!-- å¤´éƒ¨å¯¼èˆª -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <div class="logo-icon">ğŸ“‹</div>
          <h1>ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</h1>
        </div>
        
        <!-- å¯¼èˆªé“¾æ¥ - æ¡Œé¢ç‰ˆ -->
        <nav>
          <a href="#" class="nav-link active" data-view="tasks">
            <i>ğŸ“</i> ä»»åŠ¡åˆ—è¡¨
          </a>
          <a href="#" class="nav-link" data-view="courses">
            <i>ğŸ“š</i> è¯¾ç¨‹ç®¡ç†
          </a>
          <a href="#" class="nav-link" data-view="progress">
            <i>ğŸ“Š</i> è¿›åº¦æŸ¥çœ‹
          </a>
          <a href="#" class="nav-link" data-view="reports">
            <i>ğŸ“„</i> ç”ŸæˆæŠ¥å‘Š
          </a>
        </nav>
        
        <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i>â˜°</i>
        </button>
      </div>
      
      <!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
      <div class="mobile-menu" id="mobileMenu">
        <a href="#" class="nav-link active" data-view="tasks">
          <i>ğŸ“</i> ä»»åŠ¡åˆ—è¡¨
        </a>
        <a href="#" class="nav-link" data-view="courses">
          <i>ğŸ“š</i> è¯¾ç¨‹ç®¡ç†
        </a>
        <a href="#" class="nav-link" data-view="progress">
          <i>ğŸ“Š</i> è¿›åº¦æŸ¥çœ‹
        </a>
        <a href="#" class="nav-link" data-view="reports">
          <i>ğŸ“„</i> ç”ŸæˆæŠ¥å‘Š
        </a>
      </div>
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <main class="container">
    <!-- ä»»åŠ¡åˆ—è¡¨è§†å›¾ -->
    <div id="tasksView" class="view">
      <div class="page-header">
        <h2 class="page-title">ä»»åŠ¡åˆ—è¡¨</h2>
        <button id="addTaskBtn" class="btn btn-primary">
          <i>â•</i> æ·»åŠ ä»»åŠ¡
        </button>
      </div>
      
      <div id="taskList" class="space-y-4">
        <!-- ä»»åŠ¡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- è¯¾ç¨‹ç®¡ç†è§†å›¾ -->
    <div id="coursesView" class="view hidden">
      <div class="page-header">
        <h2 class="page-title">è¯¾ç¨‹ç®¡ç†</h2>
        <button id="addCourseBtn" class="btn btn-primary">
          <i>â•</i> æ·»åŠ è¯¾ç¨‹
        </button>
      </div>
      
      <div id="courseList" class="space-y-4">
        <!-- è¯¾ç¨‹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- è¿›åº¦æŸ¥çœ‹è§†å›¾ -->
    <div id="progressView" class="view hidden">
      <div class="page-header">
        <h2 class="page-title">å­¦ä¹ è¿›åº¦</h2>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card primary">
          <div class="stat-value" id="totalTasksCount">0</div>
          <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
        </div>
        <div class="stat-card success">
          <div class="stat-value" id="completedTasksCount">0</div>
          <div class="stat-label">å·²å®Œæˆä»»åŠ¡</div>
        </div>
        <div class="stat-card warning">
          <div class="stat-value" id="pendingTasksCount">0</div>
          <div class="stat-label">å¾…å®Œæˆä»»åŠ¡</div>
        </div>
        <div class="stat-card danger">
          <div class="stat-value" id="overallProgressPercent">0%</div>
          <div class="stat-label">æ€»ä½“å®Œæˆç‡</div>
        </div>
      </div>
      
      <div id="progressContent">
        <!-- è¿›åº¦å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- æŠ¥å‘Šç”Ÿæˆè§†å›¾ -->
    <div id="reportsView" class="view hidden">
      <div class="page-header">
        <h2 class="page-title">ç»Ÿè®¡æŠ¥å‘Š</h2>
      </div>
      
      <div id="reportsContent">
        <!-- æŠ¥å‘Šå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </main>

  <!-- é¡µè„š -->
  <footer>
    <div class="container footer-content">
      <p>&copy; 2025 ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ - è®©å­¦ä¹ æ›´æœ‰æ•ˆç‡</p>
    </div>
  </footer>

  <!-- è¯¾ç¨‹æ¨¡æ€æ¡† -->
  <div id="courseModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">æ·»åŠ è¯¾ç¨‹</h3>
        <button class="modal-close" data-modal="courseModal">âœ•</button>
      </div>
      <form id="courseForm">
        <input type="hidden" id="courseId">
        <div class="form-group">
          <label for="courseName" class="form-label">è¯¾ç¨‹åç§°</label>
          <input type="text" id="courseName" class="form-input" placeholder="è¯·è¾“å…¥è¯¾ç¨‹åç§°">
        </div>
        <div class="form-group">
          <label for="courseColor" class="form-label">è¯¾ç¨‹é¢œè‰²</label>
          <div class="flex items-center space-x-3">
            <input type="color" id="courseColor" class="w-10 h-10 border-0 rounded cursor-pointer" value="#4f46e5">
            <input type="text" id="courseColorText" class="form-input" value="#4f46e5">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary flex-1" data-modal="courseModal">å–æ¶ˆ</button>
          <button type="button" id="saveCourseBtn" class="btn btn-primary flex-1">ä¿å­˜</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ä»»åŠ¡æ¨¡æ€æ¡† -->
  <div id="taskModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">æ·»åŠ ä»»åŠ¡</h3>
        <button class="modal-close" data-modal="taskModal">âœ•</button>
      </div>
      <form id="taskForm">
        <input type="hidden" id="taskId">
        <div class="form-group">
          <label for="taskTitle" class="form-label">ä»»åŠ¡æ ‡é¢˜</label>
          <input type="text" id="taskTitle" class="form-input" placeholder="è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜">
        </div>
        <div class="form-group">
          <label for="taskCourseId" class="form-label">å…³è”è¯¾ç¨‹</label>
          <select id="taskCourseId" class="form-input">
            <option value="" disabled selected>é€‰æ‹©å…³è”è¯¾ç¨‹</option>
            <!-- è¯¾ç¨‹é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </select>
        </div>
        <div class="form-group">
          <label for="taskDueDate" class="form-label">æˆªæ­¢æ—¥æœŸ</label>
          <input type="date" id="taskDueDate" class="form-input">
        </div>
        <div class="form-group">
          <label for="taskPriority" class="form-label">ä¼˜å…ˆçº§</label>
          <select id="taskPriority" class="form-input">
            <option value="low">ä½</option>
            <option value="medium" selected>ä¸­</option>
            <option value="high">é«˜</option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary flex-1" data-modal="taskModal">å–æ¶ˆ</button>
          <button type="button" id="saveTaskBtn" class="btn btn-primary flex-1">ä¿å­˜</button>
        </div>
      </form>
    </div>
  </div>

  <!-- å†…è”JavaScript -->
  <script>
    // åº”ç”¨ç¨‹åºä¸»æ¨¡å—
    const App = {
      // åˆå§‹åŒ–åº”ç”¨
      init() {
        // åˆå§‹åŒ–æ•°æ®å­˜å‚¨
        this.initStorage();
        // åˆå§‹åŒ–è§†å›¾
        this.initView();
        // ç»‘å®šäº‹ä»¶
        this.bindEvents();
        // åˆå§‹åŒ–èƒŒæ™¯åˆ‡æ¢åŠŸèƒ½
        this.initBackgroundSwitcher();
      },

      // åˆå§‹åŒ–æœ¬åœ°å­˜å‚¨å’Œæ¨¡æ‹Ÿæ•°æ®
      initStorage() {
        // æ£€æŸ¥æ˜¯å¦æœ‰è¯¾ç¨‹æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®
        if (!localStorage.getItem('courses')) {
          const mockCourses = [
            { id: 1, name: 'è½¯ä»¶å·¥ç¨‹', color: '#4f46e5' },
            { id: 2, name: 'æ•°æ®ç»“æ„', color: '#06b6d4' },
            { id: 3, name: 'ç®—æ³•åˆ†æ', color: '#10b981' }
          ];
          localStorage.setItem('courses', JSON.stringify(mockCourses));
        }

        // æ£€æŸ¥æ˜¯å¦æœ‰ä»»åŠ¡æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®
        if (!localStorage.getItem('tasks')) {
          const mockTasks = [
            { id: 1, title: 'å®Œæˆè½¯ä»¶è®¾è®¡æ–‡æ¡£', courseId: 1, dueDate: '2025-12-10', status: 'pending', priority: 'high' },
            { id: 2, title: 'å¤ä¹ é“¾è¡¨ç« èŠ‚', courseId: 2, dueDate: '2025-12-08', status: 'completed', priority: 'medium' },
            { id: 3, title: 'è§£å†³æ’åºç®—æ³•é—®é¢˜', courseId: 3, dueDate: '2025-12-15', status: 'pending', priority: 'low' }
          ];
          localStorage.setItem('tasks', JSON.stringify(mockTasks));
        }
      },

      // åˆå§‹åŒ–è§†å›¾
      initView() {
        // åŠ è½½è¯¾ç¨‹åˆ—è¡¨
        this.renderCourses();
        // åŠ è½½ä»»åŠ¡åˆ—è¡¨
        this.renderTasks();
      },

      // ç»‘å®šäº‹ä»¶
      bindEvents() {
        // å¯¼èˆªåˆ‡æ¢
        document.querySelectorAll('.nav-link').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            this.switchView(e.target.dataset.view);
          });
        });

        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        if (mobileMenuBtn && mobileMenu) {
          mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('show');
          });
        }

        // æ·»åŠ è¯¾ç¨‹æŒ‰é’®
        document.getElementById('addCourseBtn')?.addEventListener('click', () => {
          this.showCourseModal();
        });

        // ä¿å­˜è¯¾ç¨‹
        document.getElementById('saveCourseBtn')?.addEventListener('click', () => {
          this.saveCourse();
        });

        // æ·»åŠ ä»»åŠ¡æŒ‰é’®
        document.getElementById('addTaskBtn')?.addEventListener('click', () => {
          this.showTaskModal();
        });

        // ä¿å­˜ä»»åŠ¡
        document.getElementById('saveTaskBtn')?.addEventListener('click', () => {
          this.saveTask();
        });

        // å…³é—­æ¨¡æ€æ¡†
        document.querySelectorAll('.modal-close').forEach(btn => {
          btn.addEventListener('click', () => {
            const modalId = btn.dataset.modal;
            this.hideModal(modalId);
          });
        });

        // é¢œè‰²é€‰æ‹©å™¨åŒæ­¥
        const courseColor = document.getElementById('courseColor');
        const courseColorText = document.getElementById('courseColorText');
        if (courseColor && courseColorText) {
          courseColor.addEventListener('input', () => {
            courseColorText.value = courseColor.value;
          });
          courseColorText.addEventListener('input', () => {
            if (/^#[0-9A-F]{6}$/i.test(courseColorText.value)) {
              courseColor.value = courseColorText.value;
            }
          });
        }
      },

      // åˆå§‹åŒ–èƒŒæ™¯åˆ‡æ¢åŠŸèƒ½
      initBackgroundSwitcher() {
        const bgOptions = document.querySelectorAll('.bg-option');
        
        // è®¾ç½®é»˜è®¤èƒŒæ™¯
        this.setBackground('solid');
        
        // ç»‘å®šèƒŒæ™¯åˆ‡æ¢äº‹ä»¶
        bgOptions.forEach(option => {
          option.addEventListener('click', () => {
            // ç§»é™¤æ‰€æœ‰activeç±»
            bgOptions.forEach(opt => opt.classList.remove('active'));
            // æ·»åŠ å½“å‰activeç±»
            option.classList.add('active');
            // åˆ‡æ¢èƒŒæ™¯
            this.setBackground(option.dataset.bg);
          });
        });
      },

      // è®¾ç½®èƒŒæ™¯
      setBackground(type) {
        const body = document.body;
        
        // ç§»é™¤æ‰€æœ‰èƒŒæ™¯æ ·å¼
        body.style.background = '';
        body.style.backgroundColor = '';
        
        // æ ¹æ®ç±»å‹è®¾ç½®èƒŒæ™¯
        switch(type) {
          case 'image':
            body.style.background = "url('https://picsum.photos/seed/taskmanager/1920/1080.jpg') no-repeat center center fixed";
            body.style.backgroundSize = 'cover';
            break;
          case 'gradient':
            body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            break;
          case 'solid':
            body.style.backgroundColor = '#1a365d';
            break;
          case 'pattern':
            body.style.background = "url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%23333\"/><circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"rgba(255,255,255,0.1)\" stroke-width=\"0.5\"/><circle cx=\"50\" cy=\"50\" r=\"30\" stroke=\"rgba(255,255,255,0.1)\" stroke-width=\"0.5\"/><circle cx=\"50\" cy=\"50\" r=\"20\" stroke=\"rgba(255,255,255,0.1)\" stroke-width=\"0.5\"/></svg>') repeat";
            body.style.backgroundSize = '100px 100px';
            break;
        }
        
        // ä¿å­˜èƒŒæ™¯é€‰æ‹©åˆ°localStorage
        localStorage.setItem('selectedBackground', type);
      },

      // åˆ‡æ¢è§†å›¾
      switchView(viewName) {
        // éšè—æ‰€æœ‰è§†å›¾
        document.querySelectorAll('.view').forEach(view => {
          view.classList.add('hidden');
        });
        // æ˜¾ç¤ºé€‰å®šè§†å›¾
        document.getElementById(`${viewName}View`).classList.remove('hidden');
        // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
        });
        document.querySelector(`.nav-link[data-view="${viewName}"]`).classList.add('active');

        // æ ¹æ®è§†å›¾åç§°åŠ è½½ç›¸åº”æ•°æ®
        if (viewName === 'courses') {
          this.renderCourses();
        } else if (viewName === 'tasks') {
          this.renderTasks();
        } else if (viewName === 'progress') {
          this.renderProgress();
        } else if (viewName === 'reports') {
          this.renderReports();
        }
      },

      // è·å–è¯¾ç¨‹æ•°æ®
      getCourses() {
        return JSON.parse(localStorage.getItem('courses') || '[]');
      },

      // è·å–ä»»åŠ¡æ•°æ®
      getTasks() {
        return JSON.parse(localStorage.getItem('tasks') || '[]');
      },

      // æ¸²æŸ“è¯¾ç¨‹åˆ—è¡¨
      renderCourses() {
        const courses = this.getCourses();
        const courseList = document.getElementById('courseList');
        if (courseList) {
          courseList.innerHTML = '';
          courses.forEach(course => {
            const courseCard = document.createElement('div');
            courseCard.className = 'card fade-in';
            courseCard.innerHTML = `
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="course-color-indicator" style="background-color: ${course.color}"></div>
                  <h3 class="text-lg font-semibold">${course.name}</h3>
                </div>
                <div class="flex space-x-2">
                  <button class="edit-course-btn btn btn-secondary btn-sm" data-id="${course.id}">ç¼–è¾‘</button>
                  <button class="delete-course-btn btn btn-danger btn-sm" data-id="${course.id}">åˆ é™¤</button>
                </div>
              </div>
            `;
            courseList.appendChild(courseCard);
          });

          // ç»‘å®šè¯¾ç¨‹ç¼–è¾‘å’Œåˆ é™¤äº‹ä»¶
          this.bindCourseActions();
        }
      },

      // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
      renderTasks() {
        const tasks = this.getTasks();
        const courses = this.getCourses();
        const taskList = document.getElementById('taskList');
        if (taskList) {
          taskList.innerHTML = '';
          tasks.forEach(task => {
            const course = courses.find(c => c.id === task.courseId);
            const taskCard = document.createElement('div');
            taskCard.className = `card task-card fade-in ${task.status === 'completed' ? 'completed' : ''}`;
            
            // æ ¹æ®ä¼˜å…ˆçº§è®¾ç½®ç±»
            let priorityClass = '';
            if (task.priority === 'high') priorityClass = 'priority-high';
            else if (task.priority === 'medium') priorityClass = 'priority-medium';
            else priorityClass = 'priority-low';
            
            taskCard.innerHTML = `
              <div class="task-priority ${priorityClass}"></div>
              <div class="flex flex-col md:flex-row justify-between">
                <div class="mb-3 md:mb-0">
                  <h3 class="text-lg font-semibold mb-1 task-title ${task.status === 'completed' ? 'line-through text-gray-500' : ''}">${task.title}</h3>
                  <div class="flex items-center text-sm text-gray-600 mb-1">
                    <div class="w-2 h-2 rounded-full mr-2" style="background-color: ${course?.color || '#6b7280'}"></div>
                    <span>${course?.name || 'æœªåˆ†ç±»'}</span>
                  </div>
                  <div class="text-sm text-gray-500">æˆªæ­¢æ—¥æœŸ: ${task.dueDate}</div>
                  <div class="text-sm text-gray-500">ä¼˜å…ˆçº§: ${this.getPriorityText(task.priority)}</div>
                </div>
                <div class="flex flex-col items-end space-y-2">
                  <div class="flex space-x-2">
                    <button class="toggle-status-btn btn btn-secondary btn-sm" data-id="${task.id}">
                      ${task.status === 'pending' ? 'æ ‡è®°å®Œæˆ' : 'æ ‡è®°å¾…åŠ'}
                    </button>
                    <button class="edit-task-btn btn btn-secondary btn-sm" data-id="${task.id}">ç¼–è¾‘</button>
                    <button class="delete-task-btn btn btn-danger btn-sm" data-id="${task.id}">åˆ é™¤</button>
                  </div>
                </div>
              </div>
            `;
            taskList.appendChild(taskCard);
          });

          // ç»‘å®šä»»åŠ¡æ“ä½œäº‹ä»¶
          this.bindTaskActions();
        }
      },

      // æ¸²æŸ“è¿›åº¦è§†å›¾
      renderProgress() {
        const courses = this.getCourses();
        const tasks = this.getTasks();
        const progressContent = document.getElementById('progressContent');
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        const totalTasks = tasks.length;
        const completedTasks = tasks.filter(task => task.status === 'completed').length;
        const pendingTasks = totalTasks - completedTasks;
        const overallProgress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        
        document.getElementById('totalTasksCount').textContent = totalTasks;
        document.getElementById('completedTasksCount').textContent = completedTasks;
        document.getElementById('pendingTasksCount').textContent = pendingTasks;
        document.getElementById('overallProgressPercent').textContent = overallProgress + '%';
        
        if (progressContent) {
          progressContent.innerHTML = '';
          
          // è®¡ç®—æ¯ä¸ªè¯¾ç¨‹çš„è¿›åº¦
          courses.forEach(course => {
            const courseTasks = tasks.filter(task => task.courseId === course.id);
            const completedTasks = courseTasks.filter(task => task.status === 'completed');
            const progressPercent = courseTasks.length > 0 ? Math.round((completedTasks.length / courseTasks.length) * 100) : 0;
            
            const progressCard = document.createElement('div');
            progressCard.className = 'card fade-in';
            progressCard.innerHTML = `
              <div class="mb-2 flex justify-between items-center">
                <h3 class="text-lg font-semibold">${course.name}</h3>
                <span class="text-sm text-gray-600">${completedTasks.length}/${courseTasks.length} å·²å®Œæˆ</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill progress-primary" style="width: ${progressPercent}%"></div>
              </div>
              <div class="text-center mt-2 text-sm font-medium">${progressPercent}%</div>
            `;
            progressContent.appendChild(progressCard);
          });
          
          // æ€»ä½“è¿›åº¦
          const totalProgressCard = document.createElement('div');
          totalProgressCard.className = 'card fade-in';
          totalProgressCard.innerHTML = `
            <div class="mb-2 flex justify-between items-center">
              <h3 class="text-lg font-semibold">æ€»ä½“è¿›åº¦</h3>
              <span class="text-sm text-gray-600">${completedTasks}/${totalTasks} å·²å®Œæˆ</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill progress-success" style="width: ${overallProgress}%"></div>
            </div>
            <div class="text-center mt-2 text-sm font-medium">${overallProgress}%</div>
          `;
          progressContent.appendChild(totalProgressCard);
        }
      },

      // æ¸²æŸ“æŠ¥å‘Šè§†å›¾
      renderReports() {
        const courses = this.getCourses();
        const tasks = this.getTasks();
        const reportsContent = document.getElementById('reportsContent');
        
        if (reportsContent) {
          reportsContent.innerHTML = '';
          
          // è¯¾ç¨‹ç»Ÿè®¡
          const courseStatsCard = document.createElement('div');
          courseStatsCard.className = 'card fade-in';
          courseStatsCard.innerHTML = `
            <h3 class="text-lg font-semibold mb-3">è¯¾ç¨‹ç»Ÿè®¡</h3>
            <div class="stats-grid">
              <div class="stat-card primary">
                <div class="stat-value">${courses.length}</div>
                <div class="stat-label">æ€»è¯¾ç¨‹æ•°</div>
              </div>
              <div class="stat-card success">
                <div class="stat-value">${courses.filter(course => tasks.some(task => task.courseId === course.id)).length}</div>
                <div class="stat-label">æœ‰ä»»åŠ¡çš„è¯¾ç¨‹</div>
              </div>
            </div>
          `;
          reportsContent.appendChild(courseStatsCard);
          
          // ä»»åŠ¡ç»Ÿè®¡
          const taskStatsCard = document.createElement('div');
          taskStatsCard.className = 'card fade-in';
          taskStatsCard.innerHTML = `
            <h3 class="text-lg font-semibold mb-3">ä»»åŠ¡ç»Ÿè®¡</h3>
            <div class="stats-grid">
              <div class="stat-card primary">
                <div class="stat-value">${tasks.length}</div>
                <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
              </div>
              <div class="stat-card success">
                <div class="stat-value">${tasks.filter(task => task.status === 'completed').length}</div>
                <div class="stat-label">å·²å®Œæˆ</div>
              </div>
              <div class="stat-card warning">
                <div class="stat-value">${tasks.filter(task => task.status === 'pending').length}</div>
                <div class="stat-label">å¾…å®Œæˆ</div>
              </div>
              <div class="stat-card danger">
                <div class="stat-value">${tasks.length > 0 ? Math.round((tasks.filter(task => task.status === 'completed').length / tasks.length) * 100) : 0}%</div>
                <div class="stat-label">å®Œæˆç‡</div>
              </div>
            </div>
          `;
          reportsContent.appendChild(taskStatsCard);
          
          // æŒ‰è¯¾ç¨‹åˆ†ç»„çš„ä»»åŠ¡ç»Ÿè®¡
          const courseTaskStatsCard = document.createElement('div');
          courseTaskStatsCard.className = 'card fade-in';
          courseTaskStatsCard.innerHTML = `
            <h3 class="text-lg font-semibold mb-3">è¯¾ç¨‹ä»»åŠ¡è¯¦æƒ…</h3>
            <div class="space-y-4">
              ${courses.map(course => {
                const courseTasks = tasks.filter(task => task.courseId === course.id);
                const completedTasks = courseTasks.filter(task => task.status === 'completed');
                
                if (courseTasks.length > 0) {
                  return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                      <div class="flex items-center">
                        <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${course.color}"></div>
                        <h4 class="font-medium">${course.name}</h4>
                      </div>
                      <div class="text-sm text-gray-600">
                        <span class="mr-3">æ€»ä»»åŠ¡: ${courseTasks.length}</span>
                        <span class="mr-3">å·²å®Œæˆ: ${completedTasks.length}</span>
                        <span>å®Œæˆç‡: ${Math.round((completedTasks.length / courseTasks.length) * 100)}%</span>
                      </div>
                    </div>
                  `;
                } else {
                  return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                      <div class="flex items-center">
                        <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${course.color}"></div>
                        <h4 class="font-medium">${course.name}</h4>
                      </div>
                      <div class="text-sm text-gray-600">æš‚æ— ä»»åŠ¡</div>
                    </div>
                  `;
                }
              }).join('')}
            </div>
          `;
          reportsContent.appendChild(courseTaskStatsCard);
        }
      },

      // è·å–ä¼˜å…ˆçº§æ–‡æœ¬
      getPriorityText(priority) {
        switch (priority) {
          case 'high': return 'é«˜';
          case 'medium': return 'ä¸­';
          case 'low': return 'ä½';
          default: return 'ä¸­';
        }
      },

      // ç»‘å®šè¯¾ç¨‹æ“ä½œäº‹ä»¶
      bindCourseActions() {
        // ç¼–è¾‘è¯¾ç¨‹
        document.querySelectorAll('.edit-course-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const courseId = parseInt(btn.dataset.id);
            this.editCourse(courseId);
          });
        });

        // åˆ é™¤è¯¾ç¨‹
        document.querySelectorAll('.delete-course-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const courseId = parseInt(btn.dataset.id);
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¯¾ç¨‹å—ï¼Ÿç›¸å…³çš„ä»»åŠ¡å°†ä¸ä¼šè¢«åˆ é™¤ã€‚')) {
              this.deleteCourse(courseId);
            }
          });
        });
      },

      // ç»‘å®šä»»åŠ¡æ“ä½œäº‹ä»¶
      bindTaskActions() {
        // åˆ‡æ¢ä»»åŠ¡çŠ¶æ€
        document.querySelectorAll('.toggle-status-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const taskId = parseInt(btn.dataset.id);
            this.toggleTaskStatus(taskId);
          });
        });

        // ç¼–è¾‘ä»»åŠ¡
        document.querySelectorAll('.edit-task-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const taskId = parseInt(btn.dataset.id);
            this.editTask(taskId);
          });
        });

        // åˆ é™¤ä»»åŠ¡
        document.querySelectorAll('.delete-task-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const taskId = parseInt(btn.dataset.id);
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) {
              this.deleteTask(taskId);
            }
          });
        });
      },

      // æ˜¾ç¤ºè¯¾ç¨‹æ¨¡æ€æ¡†
      showCourseModal(courseId = null) {
        const modal = document.getElementById('courseModal');
        const form = document.getElementById('courseForm');
        const courseNameInput = document.getElementById('courseName');
        const courseColorInput = document.getElementById('courseColor');
        const courseColorTextInput = document.getElementById('courseColorText');
        
        // é‡ç½®è¡¨å•
        form.reset();
        
        if (courseId) {
          // ç¼–è¾‘æ¨¡å¼
          const courses = this.getCourses();
          const course = courses.find(c => c.id === courseId);
          if (course) {
            document.getElementById('courseId').value = course.id;
            courseNameInput.value = course.name;
            courseColorInput.value = course.color;
            courseColorTextInput.value = course.color;
          }
        } else {
          // æ·»åŠ æ¨¡å¼
          document.getElementById('courseId').value = '';
        }
        
        this.showModal('courseModal');
      },

      // æ˜¾ç¤ºä»»åŠ¡æ¨¡æ€æ¡†
      showTaskModal(taskId = null) {
        const modal = document.getElementById('taskModal');
        const form = document.getElementById('taskForm');
        const taskTitleInput = document.getElementById('taskTitle');
        const taskCourseSelect = document.getElementById('taskCourseId');
        const taskDueDateInput = document.getElementById('taskDueDate');
        const taskPrioritySelect = document.getElementById('taskPriority');
        
        // é‡ç½®è¡¨å•
        form.reset();
        
        // å¡«å……è¯¾ç¨‹é€‰é¡¹
        const courses = this.getCourses();
        taskCourseSelect.innerHTML = '<option value="" disabled selected>é€‰æ‹©å…³è”è¯¾ç¨‹</option>';
        courses.forEach(course => {
          const option = document.createElement('option');
          option.value = course.id;
          option.textContent = course.name;
          taskCourseSelect.appendChild(option);
        });
        
        if (taskId) {
          // ç¼–è¾‘æ¨¡å¼
          const tasks = this.getTasks();
          const task = tasks.find(t => t.id === taskId);
          if (task) {
            document.getElementById('taskId').value = task.id;
            taskTitleInput.value = task.title;
            taskCourseSelect.value = task.courseId;
            taskDueDateInput.value = task.dueDate;
            taskPrioritySelect.value = task.priority || 'medium';
          }
        } else {
          // æ·»åŠ æ¨¡å¼
          document.getElementById('taskId').value = '';
          taskPrioritySelect.value = 'medium';
        }
        
        this.showModal('taskModal');
      },

      // ä¿å­˜è¯¾ç¨‹
      saveCourse() {
        const courseId = document.getElementById('courseId').value;
        const courseName = document.getElementById('courseName').value.trim();
        const courseColor = document.getElementById('courseColor').value;
        
        if (!courseName) {
          alert('è¯·è¾“å…¥è¯¾ç¨‹åç§°');
          return;
        }
        
        const courses = this.getCourses();
        
        if (courseId) {
          // æ›´æ–°ç°æœ‰è¯¾ç¨‹
          const courseIndex = courses.findIndex(c => c.id === parseInt(courseId));
          if (courseIndex !== -1) {
            courses[courseIndex].name = courseName;
            courses[courseIndex].color = courseColor;
          }
        } else {
          // æ·»åŠ æ–°è¯¾ç¨‹
          const newCourse = {
            id: Date.now(),
            name: courseName,
            color: courseColor
          };
          courses.push(newCourse);
        }
        
        localStorage.setItem('courses', JSON.stringify(courses));
        this.renderCourses();
        this.hideModal('courseModal');
      },

      // ä¿å­˜ä»»åŠ¡
      saveTask() {
        const taskId = document.getElementById('taskId').value;
        const taskTitle = document.getElementById('taskTitle').value.trim();
        const taskCourseId = document.getElementById('taskCourseId').value;
        const taskDueDate = document.getElementById('taskDueDate').value;
        const taskPriority = document.getElementById('taskPriority').value;
        
        if (!taskTitle) {
          alert('è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜');
          return;
        }
        
        if (!taskCourseId) {
          alert('è¯·é€‰æ‹©å…³è”è¯¾ç¨‹');
          return;
        }
        
        if (!taskDueDate) {
          alert('è¯·é€‰æ‹©æˆªæ­¢æ—¥æœŸ');
          return;
        }
        
        const tasks = this.getTasks();
        
        if (taskId) {
          // æ›´æ–°ç°æœ‰ä»»åŠ¡
          const taskIndex = tasks.findIndex(t => t.id === parseInt(taskId));
          if (taskIndex !== -1) {
            tasks[taskIndex].title = taskTitle;
            tasks[taskIndex].courseId = parseInt(taskCourseId);
            tasks[taskIndex].dueDate = taskDueDate;
            tasks[taskIndex].priority = taskPriority;
          }
        } else {
          // æ·»åŠ æ–°ä»»åŠ¡
          const newTask = {
            id: Date.now(),
            title: taskTitle,
            courseId: parseInt(taskCourseId),
            dueDate: taskDueDate,
            priority: taskPriority,
            status: 'pending'
          };
          tasks.push(newTask);
        }
        
        localStorage.setItem('tasks', JSON.stringify(tasks));
        this.renderTasks();
        this.hideModal('taskModal');
      },

      // ç¼–è¾‘è¯¾ç¨‹
      editCourse(courseId) {
        this.showCourseModal(courseId);
      },

      // åˆ é™¤è¯¾ç¨‹
      deleteCourse(courseId) {
        const courses = this.getCourses();
        const updatedCourses = courses.filter(c => c.id !== courseId);
        localStorage.setItem('courses', JSON.stringify(updatedCourses));
        this.renderCourses();
      },

      // åˆ‡æ¢ä»»åŠ¡çŠ¶æ€
      toggleTaskStatus(taskId) {
        const tasks = this.getTasks();
        const taskIndex = tasks.findIndex(t => t.id === taskId);
        if (taskIndex !== -1) {
          tasks[taskIndex].status = tasks[taskIndex].status === 'pending' ? 'completed' : 'pending';
          localStorage.setItem('tasks', JSON.stringify(tasks));
          this.renderTasks();
        }
      },

      // ç¼–è¾‘ä»»åŠ¡
      editTask(taskId) {
        this.showTaskModal(taskId);
      },

      // åˆ é™¤ä»»åŠ¡
      deleteTask(taskId) {
        const tasks = this.getTasks();
        const updatedTasks = tasks.filter(t => t.id !== taskId);
        localStorage.setItem('tasks', JSON.stringify(updatedTasks));
        this.renderTasks();
      },

      // æ˜¾ç¤ºæ¨¡æ€æ¡†
      showModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.classList.add('show');
        }
      },

      // éšè—æ¨¡æ€æ¡†
      hideModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.classList.remove('show');
        }
      },

      // éšè—æ‰€æœ‰æ¨¡æ€æ¡†
      hideAllModals() {
        document.querySelectorAll('.modal').forEach(modal => {
          modal.classList.remove('show');
        });
      }
    };

    // åˆå§‹åŒ–åº”ç”¨
    document.addEventListener('DOMContentLoaded', () => {
      App.init();
    });
  </script>
</body>
</html>